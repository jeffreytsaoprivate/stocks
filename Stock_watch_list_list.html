<!DOCTYPE html>
<HTML>
<HEAD>
<TITLE>Stock Watch List</TITLE>
<style>
    * {
        font-family: sans-serif;
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    td {
        width: 33%;
        vertical-align: top;
        padding: 10px;
        box-sizing: border-box; /* Include padding in the width */
    }
    .section-header {
        background-color: grey;
        color: white;
        font-weight: bold;
        padding: 5px;
        text-align: left;
    }
    .red-border {
        border: 1px solid #ff0000;
    }
    .jika-iframe {
        background: #FFFFFF;
        border: none;
        border-radius: 5px;
        box-shadow: none;
        width: 100%;
        height: 450px;
    }
    /* Add specific height to TradingView containers to avoid collapse issues */
    .tradingview-widget-container {
        height: 400px; /* Adjust as needed */
        width: 100%;
    }
</style>
</HEAD>
<BODY>
<div class="tradingview-widget-wrapper">
    <table id="stockTable"></table>
</div>

<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

<script type="text/javascript">
    const stockData = [
        {
            section: "Market",
            tag: "Market",
            items: [
                {
                    title: "",
                    type: "tradingview_hotlists",
                    containerId: "hotlist",
                    options: {
                        "container_id": "hotlist",
                        "colorTheme": "light",
                        "dateRange": "12M",
                        "exchange": "US",
                        "showChart": false,
                        "locale": "en",
                        "largeChartUrl": "",
                        "isTransparent": false,
                        "showSymbolLogo": true,
                        "showFloatingTooltip": false,
                        "width": "100%", // Use 100% for responsiveness within the cell
                        "height": "300"
                    }
                },
                { title: "ProShares UltraPro QQQ", symbol: "TQQQ", border: true },
                { title: "SPDR S&P 500 ETF Trust", symbol: "SPY" },
                { title: "iShares 20 Plus Year Treasury Bond ETF", symbol: "TLT" },
                { title: "Bitcoin to US$", symbol: "BTCUSD", border: true },
                { title: "Etherium to US$", symbol: "ETHUSD", border: true }
            ]
        },
        {
            section: "Auto / Electric vehicles",
            tag: "EV",
            items: [
                { title: "Tesla", symbol: "TSLA", border: true },
                { title: "Rivian", symbol: "RIVN" },
                { title: "Lucid", symbol: "LCID" },
                { title: "Nio", symbol: "NIO" },
                { title: "XPeng", symbol: "XPEV" },
                { title: "Toyota", symbol: "TM" },
                { title: "Ford", symbol: "F" },
                { title: "Carvana", symbol: "CVNA" },
                { title: "Hertz", symbol: "HTZ" },
                { title: "Avis", symbol: "CAR" }
            ]
        },
        {
            section: "Biotech",
            tag: "Biotech",
            items: [
                { title: "Editas", symbol: "EDIT" },
                { title: "Intellia", symbol: "NTLA" },
                { title: "CRISPR Therapeutics", symbol: "CRSP" },
                { title: "Beam", symbol: "BEAM", border: true },
                { title: "Prime medicine", symbol: "PRME", border: true },
                { title: "Allogene", symbol: "ALLO" },
                { title: "BioNTech", symbol: "BNTX", border: true },
                { title: "Moderna", symbol: "MRNA", border: true },
                { title: "Caribou", symbol: "CRBU" },
                { title: "Bluebird", symbol: "BLUE" },
                { title: "2Seventy Bio", symbol: "TSVT" },
                { title: "Schrodinger", symbol: "SDGR" },
                { title: "Recursion Pharma", symbol: "RXRX" },
                { title: "LabCorp", symbol: "LH", border: true },
                { title: "Medpace", symbol: "MEDP", border: true },
                { title: "Lonza", symbol: "LZAGY" }
            ]
        },
        {
            section: "Life Science",
            tag: "LifeScience",
            items: [
                { title: "ThermoFisher", symbol: "TMO" },
                { title: "Danaher", symbol: "DHR" },
                { title: "Illumina", symbol: "ILMN" },
                { title: "10x Genomics", symbol: "TXG" },
                { title: "Oxford nanopore", symbol: "OXBDF" },
                { title: "Ginkgo Bioworks", symbol: "DNA" },
                { title: "Berkeley Lights", symbol: "BLI" },
                { title: "908 devices", symbol: "MASS" },
                { title: "Lonza", symbol: "LZAGY" },
                { title: "Wuxi Biologics", symbol: "WXXWY" },
                { title: "Catalent", symbol: "CTLT" },
                { title: "Oxford Biomedica", symbol: "OXB" },
                { title: "23&Me", symbol: "ME", border: true },
                { title: "Hyperfine", symbol: "HYPR" },
                { title: "Butterfly", symbol: "BFLY" }
            ]
        },
        {
            section: "Tech",
            tag: "Tech",
            items: [
                { title: "Apple", symbol: "AAPL", border: true },
                { title: "Nvidia", symbol: "NVDA", border: true },
                { title: "Amazon", symbol: "AMZN", border: true },
                { title: "Netflix", symbol: "NFLX" },
                { title: "Alphabet", symbol: "GOOGL" },
                { title: "Microsoft", symbol: "MSFT" },
                { title: "Zoom", symbol: "ZM", border: true },
                { title: "Palantir", symbol: "PLTR" },
                { title: "NetApp", symbol: "NTAP", border: true },
                { title: "VMWare", symbol: "VMW", border: true },
                { title: "Salesforce", symbol: "CRM" },
                { title: "Oracle", symbol: "ORCL" }
            ]
        },
        {
            section: "Gaming",
            tag: "Gaming",
            items: [
                { title: "Roblox", symbol: "RBLX" },
                { title: "Electronic Arts", symbol: "EA" },
                { title: "Activision", symbol: "ATVI" },
                { title: "TakeTwo interactive", symbol: "TTWO" },
                { title: "Wynn", symbol: "WYNN" },
                { title: "Sands", symbol: "SCHYY" },
                { title: "Melco", symbol: "MLCO" },
                { title: "DraftKings", symbol: "DKNG" }
            ]
        },
        {
            section: "Financials",
            tag: "Banks",
            items: [
                { title: "Goldman Sachs", symbol: "GS", border: true }
                { title: "JP Morgan", symbol: "JPM", border: true }
                { title: "Bank of America", symbol: "BAC", border: false }
                { title: "KKR", symbol: "KKR", border: false }
                { title: "American Express", symbol: "AXP", border: false }
                { title: "Mastercard", symbol: "MA", border: false }
            ]
        },
        {
            section: "Fin Tech",
            tag: "FinTech",
            items: [
                { title: "Robinhood", symbol: "HOOD", border: false }
                { title: "Paypal", symbol: "PYPL", border: false }
                { title: "Lemonade", symbol: "LMND", border: false }
                { title: "Coinbase", symbol: "COIN", border: false }
                { title: "Block", symbol: "SQ", border: false }
                { title: "Affirm", symbol: "AFRM", border: false }
            ]
        },
        {
            section: "Back Office",
            tag: "BackOffice",
            items: [
                { title: "Snowflake", symbol: "SNOW", border: false }
                { title: "Asana", symbol: "ASAN", border: false }
                { title: "DocuSign", symbol: "DOCU", border: false }
                { title: "UiPath", symbol: "PATH", border: false }
                { title: "ServiceNow", symbol: "NOW", border: false }
                { title: "Monday.com", symbol: "MNDY", border: false }
                { title: "Workday", symbol: "WDAY", border: false }
            ]
        }, 
        {
            section: "Social",
            tag: "Social",
            items: [
                { title: "Meta", symbol: "META", border: false }
                { title: "Snap", symbol: "SNAP", border: false }
                { title: "Reddit", symbol: "RDDT", border: false }
                { title: "Match", symbol: "MTCH", border: false }
                { title: "Bumble", symbol: "BMBL", border: false }
            ]
        },                
        {
            section: "Consumer",
            tag: "Consumer",
            items: [
                { title: "Doordash", symbol: "DASH", border: true }
                { title: "Chipotle", symbol: "CMG", border: true }
                { title: "Brinker (Chili's)", symbol: "EAT", border: true }
                { title: "Lululemon", symbol: "LULU", border: true }
                
                { title: "Home Depot", symbol: "HD", border: false }
                { title: "Restoration Hardware", symbol: "RH", border: false }
                
                { title: "Air BNB", symbol: "ABNB", border: false }
                { title: "Generac", symbol: "GNRC", border: false }
                { title: "Mid-America Apartment Communities", symbol: "MAA", border: false }
                
                { title: "Beyond Meat", symbol: "BYND", border: false }
                { title: "Blue Apron", symbol: "APRN", border: false }
                
                { title: "Papa John's", symbol: "PZZA", border: false }
                { title: "Domino's Pizza", symbol: "DPZ", border: false }
                { title: "Stitch Fix", symbol: "SFIX", border: false }
                { title: "Warby Parker", symbol: "WRBY", border: false }
                { title: "Vista Outdoor", symbol: "VSTO", border: false }
                { title: "Pool Corp", symbol: "POOL", border: false }
                
            ]
        },                
        {
            section: "Flagship Pioneering",
            tag: "FlagshipPioneering",
            items: [
                { title: "Agios", symbol: "AGIO", border: false }
                { title: "Axcella", symbol: "AXCL", border: false }
                { title: "Seres", symbol: "MCRB", border: false }
                { title: "Syros", symbol: "SYRS", border: false }
                { title: "Sigilon", symbol: "Sigilon", border: false }
                { title: "Editas", symbol: "EDIT", border: false }
                { title: "Rubius", symbol: "RUBIUS", border: false }
                { title: "Codiak", symbol: "CDAK", border: false }
                { title: "Codiak", symbol: "CDAK", border: false }
                { title: "Kaleido", symbol: "Kaleido", border: false }
                { title: "Denali", symbol: "DNLI", border: false }
                { title: "Evelo", symbol: "EVLO", border: false }
                { title: "Sana", symbol: "SANA", border: false }
                { title: "Foghorn", symbol: "FHTX", border: false }
                { title: "Omega", symbol: "Omega", border: false }
                { title: "Quanterix", symbol: "QTRX", border: false }
                { title: "Transmedics", symbol: "TMDX", border: false }
                { title: "Moderna", symbol: "MRNA", border: true }
            ]
        },      
    ];

    // Function to insert TradingView Mini Symbol Overview widgets
    function insertStockChart(containerElement, symbol) {
        const script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js';
        script.async = true;

        const config = {
            "symbol": symbol,
            "width": "100%",
            "height": "300",
            "locale": "en",
            "dateRange": "60M",
            "colorTheme": "light",
            "isTransparent": false,
            "autosize": false,
            "chartOnly": false,
            "noTimeScale": false,
            "largeChartUrl": "",
        };
        script.innerHTML = JSON.stringify(config);

        containerElement.innerHTML = ``;
        containerElement.appendChild(script);
        
    }

    // Function to create and render TradingView Hotlists widget
    function insertStockHotlist(containerElement, options) {
        const script = document.createElement('script');
        script.type = 'text/javascript';
        script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-hotlists.js';
        script.async = true;
        
        const config = {
            "width": "100%",
            "height": "300",
            "locale": "en",
            "dateRange": "60M",
            "colorTheme": "light",
            "isTransparent": false,
            "showSymbolLogo": false,
            "showFloatingTooltip": false,
            "exchange": "US",
            "showChart": false,
            "largeChartUrl": "",
        };
        script.innerHTML = JSON.stringify(config);

        containerElement.innerHTML = ``;
        containerElement.appendChild(script);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const table = document.getElementById('stockTable');
        let row;
        let cellCount = 0;

        stockData.forEach(section => {
            // Add section header
            const headerRow = table.insertRow();
            headerRow.id = section.tag.replace(/\s/g, ''); // Remove spaces for ID
            const headerCell = headerRow.insertCell();
            headerCell.colSpan = 3;
            headerCell.className = 'section-header';
            headerCell.textContent = section.section;

            // Reset row and cell count for new section
            row = table.insertRow();
            cellCount = 0;

            section.items.forEach(item => {
                if (cellCount % 3 === 0 && cellCount !== 0) {
                    row = table.insertRow(); // New row after every 3 cells
                }

                const cell = row.insertCell();
                if (item.border) {
                    cell.classList.add('red-border');
                }
                //const chartContainerId = `stock${item.symbol}_${Date.now()}_${Math.random().toString(36).substring(2, 8)}`;
                const chartContainerId = `${section.section} ${cellCount}`;
                cell.innerHTML = `${item.title}<div id='${chartContainerId}'></div>`;    
                if (item.type === "tradingview_hotlists") {
                    insertStockHotlist(document.getElementById(chartContainerId), item.options);
                } else {
                    insertStockChart(document.getElementById(chartContainerId), item.symbol);
                }

                cellCount++;
            });

            // Fill remaining cells in the last row of the section if less than 3
            while (cellCount % 3 !== 0) {
                row.insertCell();
                cellCount++;
            }
        });
    });
</script>
</BODY>
</HTML>
